# GenMinute 기능 업그레이드 계획 (GenMinute Live)

본 문서는 파일 업로드 기반의 GenMinute 시스템을 실시간 녹음 및 화상 회의(Zoom 등) 대응이 가능한 시스템으로 확장하기 위한 단계별 개발 계획을 기술합니다.

## 🎯 목표 (Objectives)

1.  **모바일 현장 녹음:** 스마트폰 브라우저를 통해 대면 회의를 녹음하고, 종료 즉시 자동으로 분석 시작.
2.  **화상 회의(Zoom) 연동:** PC 시스템 오디오 캡처 방식을 통해 Zoom, Google Meet 등 플랫폼 제약 없는 화상 회의 기록.
3.  **통합 파이프라인:** 다양한 오디오 소스(파일, 마이크, 시스템 오디오)를 단일 처리 파이프라인으로 통합하여 유지보수성 확보.

---

## ⚖️ 기술 방식 비교 및 결정 (Architecture Decision)

실시간 녹음 구현을 위해 '에이전트 Tool 방식'과 '웹앱 모듈 확장 방식'을 비교 분석하였으며, 결과는 다음과 같습니다.

| 비교 항목 | 1. 기존 모듈 확장 (웹앱 방식) ✅ **(채택)** | 2. 에이전트 Tool 방식 (CLI/Chat) |
| :--- | :--- | :--- |
| **작동 원리** | 사용자가 **웹 브라우저**에서 녹음 버튼 클릭 → 브라우저가 녹음 → 서버 전송 | 채팅창 명령어로 **서버(호스트)의 로컬 하드웨어** 제어 |
| **모바일 사용** | **가능 (매우 우수)**. 스마트폰 브라우저 접속 시 즉시 사용 가능. | **불가능**. 서버 PC의 마이크만 제어 가능하며, 접속자의 폰 마이크 제어 불가. |
| **Zoom 녹음** | **가능**. `getDisplayMedia` API로 드라이버 없이 시스템 오디오 캡처. | **매우 어려움**. 가상 오디오 케이블 등 OS별 복잡한 드라이버 설정 필요. |
| **구현 난이도** | 중간. 웹 표준 API(MediaRecorder) 사용으로 호환성 높음. | 높음. OS별 오디오 라이브러리(PyAudio 등) 의존성 및 호환성 문제. |

**결론:** 모바일 지원과 Zoom 시스템 오디오 캡처의 용이성을 위해 **웹앱 모듈 확장 방식**으로 개발을 진행합니다.

---

## 🏗️ 아키텍처 전략: "유니버설 웹 레코더"

별도의 앱 설치나 복잡한 API 연동 없이, **웹 표준 기술(WebRTC, MediaRecorder API)**만을 사용하여 모든 요구사항을 충족합니다.

### 핵심 기술
*   **모바일 녹음:** `navigator.mediaDevices.getUserMedia({ audio: true })`
*   **PC/Zoom 녹음:** `navigator.mediaDevices.getDisplayMedia({ video: true, audio: true })` (시스템 오디오 공유 옵션 활용)
*   **데이터 처리:** 클라이언트에서 `Blob`으로 녹음 후, 기존 `/upload` API로 전송 (백엔드 수정 최소화).

---

## 📅 단계별 구현 계획 (Roadmap)

### Phase 1: 유니버설 레코더 UI/UX 구현 (최우선)
> **목표:** 사용자가 웹에서 직접 녹음하고(마이크 or 시스템), 종료 시 바로 분석되도록 함.

1.  **디렉토리 구조 분리 (안전성 확보):**
    *   `routes/live_record.py`: 녹음 기능 전용 블루프린트.
    *   `templates/live/`: 녹음 관련 HTML 분리.
    *   `static/js/live/`: 녹음 로직 JS 분리.

2.  **신규 페이지 생성 (`templates/live/recorder.html`):**
    *   **탭 인터페이스:** `[마이크 녹음]` (모바일용) / `[PC 오디오 녹음]` (Zoom용).
    *   **기능:** 녹음 시작/중지, 타이머, 파형 시각화(Visualizer).
    *   **전송:** 녹음 종료 시 기존 `/upload` 로직을 재활용하여 서버로 전송.

3.  **백엔드 연동:**
    *   `app.py`에 `live_record` 블루프린트 등록.
    *   메인 네비게이션(`layout.html`)에 '실시간 녹음' 메뉴 추가.

### Phase 2: 준실시간(Near Real-time) 미리보기
> **목표:** 녹음이 끝날 때까지 기다리지 않고, 중간 내용을 텍스트로 확인.

1.  **WebSocket 연동:** `Flask-SocketIO` 도입.
2.  **청크 전송:** 30~60초 간격으로 오디오 청크 전송 및 임시 STT 결과 반환.

---

## 🛠️ 기술 스택 변경 사항

*   **Frontend:** Vanilla JS (유지), Web Audio API (추가)
*   **Backend:** Flask (유지)
*   **Dependencies:** 추가 라이브러리 불필요 (순수 웹 표준 API 사용)